<!-- Form Content -->
<div class="idea-detail-content">
  <div class="idea-detail-structured">
    <form id="{{#if isEdit}}editIdeaForm{{else}}createIdeaForm{{/if}}" 
          method="POST" 
          action="{{#if isEdit}}/ideas/{{idea.id}}?_method=PUT{{else}}/ideas{{/if}}">
      {{#if isEdit}}
      <input type="hidden" name="_method" value="PUT">
      {{/if}}
      
      <!-- Idea Details Section -->
      <div class="section-group">
        <h3 class="section-title">IDEA DETAILS</h3>
        
        <!-- Title Field -->
        <div class="form-field">
          <label class="field-label">Title</label>
          <input 
            type="text" 
            id="title" 
            name="title" 
            class="field-input" 
            placeholder="Enter your idea title..."
            value="{{idea.title}}"
            required
            maxlength="255"
          >
        </div>
        
        <!-- Content Field -->
        <div class="form-field">
          <label class="field-label">Content</label>
          <textarea 
            id="content" 
            name="content" 
            class="field-textarea" 
            placeholder="Describe your idea in detail..."
            rows="12"
            required
          >{{idea.content}}</textarea>
        </div>
        
        <!-- Tags Row -->
        <div class="metadata-row">
          <div class="metadata-field">
            <label class="field-label">Tags</label>
            <div class="tag-input-container" id="tagInputContainer">
              <div class="selected-tags" id="selectedTags">
                {{#if idea.tags}}
                  {{#each idea.tags}}
                    <span class="tag-badge {{getTagColor @index}}" data-tag="{{name}}">
                      {{name}}
                      <span class="remove-tag" data-action="remove" data-tag="{{name}}">&times;</span>
                    </span>
                  {{/each}}
                {{/if}}
              </div>
              <button type="button" class="add-tag-btn" id="addTagBtn">+ Add Tag</button>
              <input type="hidden" name="tags" id="tagsInput" value="">
            </div>
          </div>
        </div>
        
        <!-- Visibility Row -->
        <div class="metadata-row">
          <div class="metadata-field">
            <label class="field-label">Visibility</label>
            <div class="visibility-toggle-container">
              <input type="hidden" id="isPublic" name="isPublic" value="{{#if idea.isPublic}}true{{else}}false{{/if}}">
              <div class="toggle-switch {{#if idea.isPublic}}active{{/if}}" id="visibilityToggle">
                <div class="toggle-slider"></div>
              </div>
              <div class="toggle-labels">
                <span class="toggle-label private-label {{#unless idea.isPublic}}active{{/unless}}">
                  <i class="fas fa-lock"></i>
                  Private
                </span>
                <span class="toggle-label public-label {{#if idea.isPublic}}active{{/if}}">
                  <i class="fas fa-globe"></i>
                  Public
                </span>
              </div>
              <div class="toggle-hint">
                <span class="private-hint {{#unless idea.isPublic}}active{{/unless}}">Only you can see this idea</span>
                <span class="public-hint {{#if idea.isPublic}}active{{/if}}">Anyone can discover and view this idea</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Form Actions -->
        <div class="form-actions">
          <a href="{{#if isEdit}}/ideas/{{idea.id}}{{else}}/ideas{{/if}}" class="btn btn-secondary">
            <i class="fas fa-times"></i>
            Cancel
          </a>
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-{{#if isEdit}}save{{else}}plus{{/if}}"></i>
            {{#if isEdit}}Update Idea{{else}}Create Idea{{/if}}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
